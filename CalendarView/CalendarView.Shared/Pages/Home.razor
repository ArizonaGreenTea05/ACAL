@page "/"
@using CalendarView.Shared.Models
@using Microsoft.Extensions.Logging
@inject Design Design
@inject ILogger<Home> Logger
@inject NavigationManager Nav

<PageTitle>Loading...</PageTitle>

@code {
	protected override void OnAfterRender(bool firstRender)
	{
		base.OnAfterRender(firstRender);
		var destUrl = Design.PageLayout switch
		{
			Enums.PageLayout.Agenda => "/agenda",
			Enums.PageLayout.AgendaWithImage => "/agenda-with-image",
			Enums.PageLayout.AgendaWithBackground => "/agenda?showBackgroundImage=true",
			Enums.PageLayout.AgendaWithImageAndBackground => "/agenda-with-image?showBackgroundImage=true",
			Enums.PageLayout.Calendar => "/calendar",
			Enums.PageLayout.CalendarWithImage => "/calendar-with-image",
			Enums.PageLayout.CalendarWithBackground => "/calendar?showBackgroundImage=true",
			Enums.PageLayout.CalendarWithImageAndBackground => "/calendar-with-image?showBackgroundImage=true",
			_ => "/not-found"
		} ;
		Logger.LogInformation("Navigating to '{url}'", destUrl);
		Nav.NavigateTo(destUrl, forceLoad: false);
	}
}
